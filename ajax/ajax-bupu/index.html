<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ajax实例,瀑布流的实现</title>
</head>
<!--
固定例
非固定例 
通过后端请求数据动态添加到页面;
-->
<style>
    *{margin:0; padding:0}
    li{list-style:none}
    ul{width:1100px; margin:auto; overflow:hidden;}
    ul li{width:224px; float:left; margin:10px;}
    ul li div{width:220px; border:1px solid #000; padding:5px;}
    ul li div img{width:220px; }
    
</style>
<script src="ajax.js"></script>
<script src="json.js"></script>
<script>
    var oUl = document.getElementById('oul');
    var aLi = document.getElementsByTagName('li');
   
    ajax('get', 'getpic.php', 'cpage=1', function(data){
        for(var i=0; i<data.length; i++){
            var _index = getShort();

            var oDiv = document.creatElement('div');
            var oImg = document.creatElement('img');
            oImg.src = data[i].preview;
            oImg.style.width = '225px';
            oImg.style.height = data[i].height*(225/data[i].width) + 'px';
            oDiv.appendChild(oImg);
            var oP = document.creatElement('p');
            oP.innerHTML = data[i].title;
            oDiv.appendChile(oP);
            aLi[_index].appendChild(oDiv);
        }
    })

function getShort(){
    var index = 0;
    var ih =  aLi[index].offsetHeight;
    for(var i=0; i<iLen; i++){
        if(aLi[i].offsetHeight<ih){
            index =i;
            ih = aLi[i].offsetHeight;
        }
    }
    return index;
}    
</script>
<body>
    <ul id="oul">
<!--
        <li>
            <div>
                <img src="http://s11.mogucdn.com/mlcdn/c45406/180628_222b1li66k7i81af4jfjg6e11e1ai_640x852.jpg_280x374.v1cAC.70.webp" alt="">
                <p>春秋季时尚套装两件套宽松百搭港风帅气字母印花中长款长袖衬衫韩版高腰系带拼色开叉半身裙子女夏</p>
            </div>
        </li>
-->
        
    </ul>
</body>
</html>